# Universal Render Pipeline (URP) Setup & Troubleshooting Guide

## URP Setup Steps
1. **Install URP:**
   - Open Unity Editor, go to `Window > Package Manager`.
   - Search for **Universal RP** (Universal Render Pipeline) and install it.
2. **Create a URP Pipeline Asset:**
   - Go to `Assets > Create > Rendering > Universal Render Pipeline > Pipeline Asset (Forward Renderer)`.
   - This creates two assets: a Pipeline Asset and a Renderer.
3. **Assign the URP Pipeline Asset:**
   - Go to `Edit > Project Settings > Graphics` and assign the new URP Pipeline Asset to the `Scriptable Render Pipeline Settings` field.
   - Go to `Edit > Project Settings > Quality` and assign the URP Pipeline Asset for all quality levels.
4. **Upgrade Materials:**
   - Go to `Edit > Render Pipeline > Universal Render Pipeline > Upgrade Project Materials to UniversalRP Materials`.
   - This converts all Standard materials to URP-compatible shaders.
5. **Upgrade Scenes & Prefabs:**
   - Open each scene and prefab. If you see magenta (missing) materials, manually assign URP-compatible materials.
   - Use the `SceneAutoBuilder` and `PrefabGenerator` tools to regenerate scenes/prefabs with URP-ready components.
6. **Camera & Lighting:**
   - All generated cameras now include `UniversalAdditionalCameraData` for URP features.
   - Lighting is compatible, but you can add URP-specific lights and Volumes for advanced effects.
7. **Post-Processing:**
   - Add a `Volume` GameObject to your scene (auto-generated by SceneAutoBuilder).
   - Assign a URP Volume Profile for post-processing (Bloom, Color Grading, etc.).

## Common URP Issues & Fixes
- **Magenta Materials:**
  - Indicates missing or incompatible shaders. Use the material upgrader or assign URP shaders manually.
- **Missing Post-Processing:**
  - Ensure a `Volume` with a valid URP Volume Profile is present in the scene.
- **Script Errors:**
  - All automation scripts are URP-ready. If you use custom scripts, ensure they do not reference legacy render pipeline APIs.
- **Lighting Looks Different:**
  - URP uses different lighting and color grading. Adjust your lights and post-processing settings for best results.

## Automation Tools & URP
- **SceneAutoBuilder:**
  - Now adds `UniversalAdditionalCameraData` and a global `Volume` for URP post-processing.
- **PrefabGenerator:**
  - All generated prefabs are URP compatible. Upgrade any custom materials as needed.
- **PrefabAutoWiring & QuickTestRunner:**
  - Fully compatible with URP. Ensure your prefabs and scenes use URP materials/components.

## Best Practices
- Always upgrade materials and assign URP Pipeline Asset before running automation tools.
- Use URP Volume Profiles for post-processing instead of legacy PostProcessingStack.
- Regularly check for magenta materials and fix them immediately.
- Document any custom URP settings or profiles in your project docs.

---

# BladeAeternum Script Reference

<details>
<summary><strong>CombatCore (BladeAeternum.Combat)</strong></summary>

**Purpose:** Handles core combat mechanics: slashing, blocking, and timing-based parries. Modular and event-driven for expansion.

**Serialized Fields:**
- `ParrySystem parrySystem` (private)

**Events:**
- `OnSlash` (Action)
- `OnBlock` (Action)
- `OnParryAttempt` (Action&lt;bool&gt;)

**Public Methods:**
- `void Slash()` – Perform a slash attack, triggers OnSlash.
- `void Block()` – Perform a block, triggers OnBlock.
- `void TryParry(float inputTime)` – Attempt a parry, triggers OnParryAttempt.

</details>

<details>
<summary><strong>ParrySystem (BladeAeternum.Combat)</strong></summary>

**Purpose:** Handles timing-based parry detection and triggers parry effects.

**Serialized Fields:**
- `float perfectParryWindow` (private)

**Events:**
- `OnParrySuccess` (Action)
- `OnParryFail` (Action)

**Public Properties:**
- `float LastAttackTime` (get/set)

**Public Methods:**
- `bool AttemptParry(float inputTime)` – Returns true if parry is successful, triggers events.

</details>

<details>
<summary><strong>GameManager (BladeAeternum.CoreManagers)</strong></summary>

**Purpose:** Manages the overall duel flow: intro, fight, and outcome. Singleton pattern.

**Enums:**
- `DuelState { Intro, Fight, Outcome }`

**Events:**
- `OnIntroStart` (Action)
- `OnFightStart` (Action)
- `OnDuelEnd` (Action&lt;bool&gt;)

**Public Properties:**
- `DuelState CurrentState` (get)
- `static GameManager Instance` (get)

**Public Methods:**
- `void StartDuel()` – Sets state to Intro, triggers OnIntroStart.
- `void BeginFight()` – Sets state to Fight, triggers OnFightStart.
- `void EndDuel(bool playerWon)` – Sets state to Outcome, triggers OnDuelEnd.

</details>

<details>
<summary><strong>WeaponUnlocker (BladeAeternum.CoreManagers)</strong></summary>

**Purpose:** Unlocks new blades upon player victory.

**Events:**
- `OnBladeUnlocked` (Action&lt;string&gt;)

**Public Methods:**
- `void UnlockBlade(string bladeName)` – Unlocks a blade, triggers OnBladeUnlocked.

</details>

<details>
<summary><strong>HUDController (BladeAeternum.UI)</strong></summary>

**Purpose:** Controls the Heads-Up Display (HUD) for health, stamina, and blade energy.

**Serialized Fields:**
- `Slider healthBar` (private)
- `Slider staminaBar` (private)
- `Slider bladeEnergyBar` (private)

**Events:**
- `OnHealthChanged` (Action&lt;float&gt;)
- `OnStaminaChanged` (Action&lt;float&gt;)
- `OnBladeEnergyChanged` (Action&lt;float&gt;)

**Public Methods:**
- `void UpdateHealth(float value)` – Updates health bar, triggers OnHealthChanged.
- `void UpdateStamina(float value)` – Updates stamina bar, triggers OnStaminaChanged.
- `void UpdateBladeEnergy(float value)` – Updates blade energy bar, triggers OnBladeEnergyChanged.

</details>

<details>
<summary><strong>LoreManager (BladeAeternum.Lore)</strong></summary>

**Purpose:** Delivers pre-duel lore messages and narrative context.

**Serialized Fields:**
- `string[] preDuelMessages` (private)

**Events:**
- `OnShowMessage` (Action&lt;string&gt;)

**Public Methods:**
- `void ShowPreDuelMessage()` – Shows the current pre-duel message, triggers OnShowMessage.

</details>

<details>
<summary><strong>EnemyAI (BladeAeternum.Characters)</strong></summary>

**Purpose:** Simple pattern-based boss combat AI.

**Serialized Fields:**
- `CombatCore combatCore` (private)

**Events:**
- `OnPatternStart` (Action)

**Public Methods:**
- `void StartPattern()` – Starts the attack pattern coroutine, triggers OnPatternStart.

</details> 